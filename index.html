<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Plan interactif de la Facult√© de Droit de Nancy - Association EDEN</title>
  <meta name="description" content="D√©couvrez le plan interactif du campus, comprenant les noms des diff√©rents b√¢timents et amphith√©√¢tres">
  <meta property="og:title" content="Association Eden - Plan 3D du Campus">
<meta property="og:description" content="Explorez le plan 3D interactif de la Facult√© de Droit de Nancy">
<meta property="og:image" content="https://plan.associationeden.fr//plan.jpg">
<meta property="og:url" content="https://plan.associationeden.fr">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://plan.associationeden.fr/plan.jpg">


  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    /* Base + box sizing coh√©rent */
    *, *::before, *::after { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
    }

    /* Le corps occupe exactement la hauteur de l'√©cran et ne d√©passe jamais */
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      color: #111;
      text-align: center;

      /* Hauteur verrouill√©e √† la viewport (compat mobile) */
      min-height: 100svh;
      max-height: 100svh; /* ne d√©passe jamais */
      overflow: hidden;   /* emp√™che le scroll de page */

      display: flex;
    }

    /* Conteneur principal en colonne qui remplit tout l'√©cran */
    .page {
      display: flex;
      flex-direction: column;
      gap: 16px;                 /* espace vertical entre √©l√©ments */
      padding: 16px;
      width: 100%;
      height: 100%;              /* occupe toute la hauteur du body */
    }

    h1 {
      margin: 0;                 /* √©vite les d√©calages inattendus */
      color: #ac3741;
      font-size: clamp(12px, 2vw, 24px);
      line-height: 1.2;
    }

    /* Le viewer prend tout l'espace restant entre le h1 et le bouton */
    #building-model {
      flex: 1 1 auto;            /* occupe le reste de l'√©cran */
      min-height: 0;             /* crucial pour que flex puisse r√©tr√©cir sans overflow */
      width: 100%;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      background: #fff;
    }

    .control-button {
      align-self: center;        /* centre le bouton dans l'axe horizontal */
      padding: clamp(8px, 2vw, 20px) clamp(12px, 3vw, 40px);
      font-size: clamp(12px, 2vw, 24px);
      color: #fff;
      background-color: #ff8080;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform .05s ease, background-color .2s ease;
    }
    .control-button:hover { background-color: #ff0000; }
    .control-button:active { transform: scale(0.98); }
    .control-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .control-button:focus-visible {
      outline: 3px solid #ac3741;
      outline-offset: 3px;
    }
  </style>
</head>
<body>

  <div class="page">
    <h1>Plan de la Facult√©</h1>

    <!-- Le mod√®le remplit l'espace disponible entre le titre et le bouton -->
    <model-viewer
      id="building-model"
      src="https://alexandre42000456.github.io/testEDEN/bat8.glb"
      alt="Plan 3D de la Facult√©"
      camera-controls
      exposure="1"
      min-camera-orbit="auto 0deg auto"
      max-camera-orbit="auto 90deg auto"
      camera-orbit="0deg 75deg 85%"
      style="background-color: #cccccc;"
      >
    </model-viewer>

    <button id="toggle-model-button" class="control-button">Afficher les amphith√©√¢tres</button>
  </div>

  <script>
    // üîó Renseigne tes deux mod√®les ici
    const MODELS = {
      batiments: 'https://alexandre42000456.github.io/testEDEN/bat8.glb',
      amphis:    'https://alexandre42000456.github.io/testEDEN/amphis6.glb'
    };

    const modelViewer = document.getElementById('building-model');
    const button = document.getElementById('toggle-model-button');

    let showing = 'batiments';
    let busy = false;

    function updateButtonLabel() {
      button.textContent = (showing === 'batiments')
        ? 'Afficher les amphith√©√¢tres'
        : 'Afficher les b√¢timents';
    }

    async function toggleModel() {
      if (busy) return;
      busy = true;
      button.disabled = true;
      const previous = showing;
      const next = (showing === 'batiments') ? 'amphis' : 'batiments';

      const oldLabel = button.textContent;
      button.textContent = 'Chargement‚Ä¶';

      const onLoad = () => {
        modelViewer.removeEventListener('load', onLoad);
        modelViewer.removeEventListener('error', onError);
        showing = next;
        busy = false;
        button.disabled = false;
        updateButtonLabel();
      };

      const onError = (e) => {
        console.error('Erreur de chargement du mod√®le', e);
        modelViewer.removeEventListener('load', onLoad);
        modelViewer.removeEventListener('error', onError);
        modelViewer.src = MODELS[previous];
        busy = false;
        button.disabled = false;
        button.textContent = oldLabel;
        alert('Impossible de charger le mod√®le demand√©.');
      };

      modelViewer.addEventListener('load', onLoad, { once: true });
      modelViewer.addEventListener('error', onError, { once: true });

      modelViewer.src = MODELS[next];
      await modelViewer.updateComplete;
    }

    button.addEventListener('click', toggleModel);
    updateButtonLabel();
  </script>

</body>
</html>
